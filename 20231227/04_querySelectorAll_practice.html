<!doctype html>
<html lang="en">

<head>
  <title>Title</title>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS v5.2.1 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <style>
    .img-size {
      width: 150px;
      height: 150px;
    }
  </style>
</head>

<body>
  <div class="container mt-5">


    <table class="table table-success table-bordered table-hover text-center align-middle">
      <thead>
        <tr class=>
          <th>產品</th>
          <th>單價</th>
          <th>數量</th>
          <th>總價</th>
        </tr>
      </thead>
      <tbody>
        <tr class="table-danger">
          <th>
            <img src="https://miro.medium.com/max/1920/1*IgK6HpPjPShEe9yRRVle2w.png" alt="" class="img-size">
          </th>
          <td>
            <input type="number" name="" id="" class="form-control price">
          </td>
          <td class="table-warning">
            <input type="number" name="" id="" class="form-control num">
          </td>
          <td>
            <input type="text" name="" id="" class="form-control item" readonly>
          </td>
        </tr>
        <tr>
          <th>
            <img src="https://miro.medium.com/max/1920/1*hfrgRLw8BnSsFPMhqK0-_g.png" alt="" class="img-size">
          </th>
          <td>
            <input type="number" name="" id="" class="form-control price">
          </td>
          <td class="table-warning">
            <input type="number" name="" id="" class="form-control num">
          </td>
          <td>
            <input type="text" name="" id="" class="form-control item" readonly>
          </td>
        </tr>
        <tr>
          <th>
            <img
              src="https://mall.iopenmall.tw/website/uploads_product/website_29318/P2931804578266_4_40237385.jpg?hash=2301"
              alt="" class="img-size">
          </th>
          <td>
            <input type="number" name="" id="" class="form-control price">
          </td>
          <td class="table-warning">
            <input type="number" name="" id="" class="form-control num">
          </td>
          <td>
            <input type="text" name="" id="" class="form-control item" readonly>
          </td>
        </tr>
        <tr>
          <th>總金額</th>
          <td colspan="2">


            <input type="text" name="" id="" class="form-control totalPrice" readonly>

          </td>
          <td>
            <button class="btn btn-dark myBtn">計算 ( 500 以上打 8 折)</button>
          </td>

        </tr>
      </tbody>
    </table>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"></script>

  <script>
    const prices = document.querySelectorAll('.price');
    const nums = document.querySelectorAll('.num');
    const items = document.querySelectorAll('.item');
    const totalPrice = document.querySelector('.totalPrice');
    const myBtn = document.querySelector('.myBtn');


    // 使用 querySelectorAll() 的版本

    prices.forEach(function (val, idx) {


      val.addEventListener('change', function () {
        let price = val.value;
        let num = nums[idx].value;
        items[idx].value = price * num;

      })
    })

    myBtn.addEventListener('click', function () {
      let sum = 0;
      items.forEach(function (val, idx) {
        sum += +val.value;
        if (sum > 500) {
          totalPrice.value = sum * 0.8
        } else {
          totalPrice.value = sum;
        }
      })
    })




    // myInputNum1.addEventListener('change', function () { // 補筆記 change event
    //   calTotal(myInputNum1, myInputNum2, myInputText1)
    // })

    // myInputNum2.addEventListener('change', function () {
    //   calTotal(myInputNum1, myInputNum2, myInputText1)

    // })
    // myInputNum3.addEventListener('change', function () {
    //   calTotal(myInputNum3, myInputNum4, myInputText2)
    // })

    // myInputNum4.addEventListener('change', function () {
    //   calTotal(myInputNum3, myInputNum4, myInputText2)

    // })
    // myInputNum5.addEventListener('change', function () {
    //   calTotal(myInputNum5, myInputNum6, myInputText3)
    // })

    // myInputNum6.addEventListener('change', function () {
    //   calTotal(myInputNum5, myInputNum6, myInputText3)

    // })

    // myBtn.addEventListener('click', function () {
    //   let getTotal1 = +myInputText1.value;
    //   let getTotal2 = +myInputText2.value;
    //   let getTotal3 = +myInputText3.value;
    //   let total = getTotal1 + getTotal2 + getTotal3;
    //   if (total > 500) {
    //     total = total * 0.8
    //   }

    //   totalPrice.value = total;
    // })

  </script>
</body>

</html>