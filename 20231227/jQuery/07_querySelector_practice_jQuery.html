<!doctype html>
<html lang="en">

<head>
  <title>Title</title>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS v5.2.1 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <style>
    .img-size {
      width: 150px;
      height: 150px;
    }
  </style>
</head>

<body>
  <div class="container mt-5">


    <table class="table table-success table-bordered table-hover text-center align-middle">
      <thead>
        <tr class=>
          <th>產品</th>
          <th>單價</th>
          <th>數量</th>
          <th>總價</th>
        </tr>
      </thead>
      <tbody>
        <tr class="table-danger">
          <th>
            <img src="https://miro.medium.com/max/1920/1*IgK6HpPjPShEe9yRRVle2w.png" alt="" class="img-size">
          </th>
          <td>
            <input type="number" name="" id="myInputNumber1" class="form-control ">
          </td>
          <td class="table-warning">
            <input type="number" name="" id="myInputNumber2" class="form-control ">
          </td>
          <td>
            <input type="text" name="" id="" class="form-control myInputText1" readonly>
          </td>
        </tr>
        <tr>
          <th>
            <img src="https://miro.medium.com/max/1920/1*hfrgRLw8BnSsFPMhqK0-_g.png" alt="" class="img-size">
          </th>
          <td>
            <input type="number" name="" id="myInputNumber3" class="form-control ">
          </td>
          <td class="table-warning">
            <input type="number" name="" id="myInputNumber4" class="form-control ">
          </td>
          <td>
            <input type="text" name="" id="" class="form-control myInputText2" readonly>
          </td>
        </tr>
        <tr>
          <th>
            <img
              src="https://mall.iopenmall.tw/website/uploads_product/website_29318/P2931804578266_4_40237385.jpg?hash=2301"
              alt="" class="img-size">
          </th>
          <td>
            <input type="number" name="" id="myInputNumber5" class="form-control ">
          </td>
          <td class="table-warning">
            <input type="number" name="" id="myInputNumber6" class="form-control ">
          </td>
          <td>
            <input type="text" name="" id="" class="form-control myInputText3" readonly>
          </td>
        </tr>
        <tr>
          <th>總金額</th>
          <td colspan="2">


            <input type="text" name="" id="" class="form-control totalPrice" readonly>

          </td>
          <td>
            <button class="btn btn-dark myBtn">計算 ( 500 以上打 8 折)</button>
          </td>
          <!-- <td></td>
        <td></td> -->
        </tr>
      </tbody>
    </table>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"></script>

  <!-- jQuery; 用 cdn.js 的方式載入-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>


  <script>
    $(function () {


      const myInputNum1 = $('#myInputNumber1');
      const myInputNum2 = $('#myInputNumber2');
      const myInputNum3 = $('#myInputNumber3');
      const myInputNum4 = $('#myInputNumber4');
      const myInputNum5 = $('#myInputNumber5');
      const myInputNum6 = $('#myInputNumber6');
      const myInputText1 = $('.myInputText1');
      const myInputText2 = $('.myInputText2');
      const myInputText3 = $('.myInputText3');
      const totalPrice = $('.totalPrice');
      const myBtn = $('.myBtn');


      // 沒有使用 querySelectorAll() 的版本

      // 通用 function，計算出每一筆資料的總金額
      function calTotal(inputNum1, inputNum2, inputText) {
        let getPrice = +inputNum1.val();
        let getAmount = +inputNum2.val();
        // console.log(getAmount) // 問為甚麼沒寫會是 0
        inputText.val(getPrice * getAmount)

      }

      myInputNum1.change(function (e) {
        calTotal(myInputNum1, myInputNum2, myInputText1)
        // console.log('ok')
      });
      myInputNum2.change(function (e) {
        calTotal(myInputNum1, myInputNum2, myInputText1)
      });
      myInputNum3.change(function (e) {
        calTotal(myInputNum3, myInputNum4, myInputText2)
      });
      myInputNum4.change(function (e) {
        calTotal(myInputNum3, myInputNum4, myInputText2)
      });
      myInputNum5.change(function (e) {
        calTotal(myInputNum5, myInputNum6, myInputText3)
      });
      myInputNum6.change(function (e) {
        calTotal(myInputNum5, myInputNum6, myInputText3)
      });


      myBtn.click(function (e) {
        let getTotal1 = +myInputText1.val();
        let getTotal2 = +myInputText2.val();
        let getTotal3 = +myInputText3.val();
        let total = getTotal1 + getTotal2 + getTotal3;
        if (total > 500) {
          total = total * 0.8
        }

        totalPrice.val(total);
      });
    })
  </script>
</body>

</html>